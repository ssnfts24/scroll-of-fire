<!doctype html>
<html lang="en" dir="ltr">
<head>
  <!-- Resolve all relative URLs from the project root on GitHub Pages -->
  <base href="https://ssnfts24.github.io/scroll-of-fire/">
  <script>
    // In GitHub repo preview (github.com), remove <base> so relative paths still work.
    if (location.hostname === "github.com") {
      const b = document.querySelector("base"); if (b) b.remove();
    }
  </script>

  <meta charset="utf-8" />
  <title>Scroll of Fire — Teaching Lab</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0b0b0f" media="(prefers-color-scheme: dark)">
  <meta name="theme-color" content="#0b0b0f">
  <meta name="color-scheme" content="dark">
  <meta name="description" content="An interactive lab for living the Codex: observer loop, coherence calculators, voice gate audio, phrase tuner, and a private witness ledger with streaks & badges.">
  <link rel="canonical" href="https://ssnfts24.github.io/scroll-of-fire/teach.html"/>

  <!-- Social cards -->
  <meta property="og:title" content="Teaching Lab — Live the Codex">
  <meta property="og:description" content="Hands-on tools: observe, tune language, measure coherence, log witness — then grow your streak.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://ssnfts24.github.io/scroll-of-fire/teach.html">
  <meta property="og:image" content="https://raw.githubusercontent.com/ssnfts24/scroll-of-fire/main/docs/assets/file_0000000052e861f98b087ad0b80cbefc%20(1).png">
  <meta name="twitter:card" content="summary_large_image">

  <!-- Fonts + Base styles from your Codex -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Crimson+Pro:wght@400;700;800&display=swap" rel="stylesheet">

  <!-- Codex base CSS -->
  <link rel="preload" as="style" href="assets/css/codex.css?v=2025-10-18x">
  <link rel="stylesheet" href="assets/css/codex.css?v=2025-10-18x" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="assets/css/codex.css?v=2025-10-18x"></noscript>

  <!-- Teaching Lab theme (enhanced) -->
  <link rel="stylesheet" href="assets/css/teach.css?v=2025-10-18b">
</head>

<body>
<a class="sr-only" href="#lab-main">Skip to content</a>

<main id="lab-main" class="wrap lab-wrap" data-page="teaching">
  <!-- Header -->
  <header class="page-head fancy-head" aria-labelledby="lab-title">
    <span class="lab-strap" aria-hidden="true">Practice Suite</span>
    <h1 id="lab-title" class="title">🎛️ Teaching Lab — <em>Live the Codex</em></h1>
    <p class="subtitle">
      Hands-on tools: observe, tune language, measure coherence, log witness — then grow your streak.
      <span class="meta">All computations run locally in your browser.</span>
    </p>

    <!-- Mini page nav (anchors jump to tabs) -->
    <nav class="quick mini-toc" aria-label="Sections">
      <a class="cta" href="#tab-observer">Observer</a>
      <a class="cta" href="#tab-voice">Voice Gate</a>
      <a class="cta" href="#tab-phrase">Phrase Tuner</a>
      <a class="cta" href="#tab-coherence">Coherence Desk</a>
      <a class="cta" href="#tab-ledger">Witness Ledger</a>
      <span class="flex"></span>
      <a class="cta" href="index.html">← Back to Codex</a>
    </nav>

    <p class="hint meta">
      Tip: press <kbd>1</kbd>–<kbd>5</kbd> to switch tabs • <kbd>?</kbd> for help •
      <kbd>S</kbd> to start/stop the ring timer.
    </p>
  </header>

  <!-- Top Controls / Tablist -->
  <section class="lab-top card" aria-label="Lab controls">
    <div class="pill-tabs" role="tablist" aria-label="Teaching tabs">
      <button class="pill active" data-tab="observer" role="tab" aria-selected="true" aria-controls="tab-observer">Observer</button>
      <button class="pill" data-tab="voice" role="tab" aria-selected="false" aria-controls="tab-voice">Voice Gate</button>
      <button class="pill" data-tab="phrase" role="tab" aria-selected="false" aria-controls="tab-phrase">Phrase Tuner</button>
      <button class="pill" data-tab="coherence" role="tab" aria-selected="false" aria-controls="tab-coherence">Coherence Desk</button>
      <button class="pill" data-tab="ledger" role="tab" aria-selected="false" aria-controls="tab-ledger">Witness Ledger</button>
      <span class="flex" aria-hidden="true"></span>
      <label class="coach-toggle" for="coach"><input id="coach" type="checkbox"> Coach Mode</label>
    </div>
  </section>

  <!-- OBSERVER TAB -->
  <section id="tab-observer" class="tab active" role="tabpanel" aria-labelledby="observer">
    <article class="grid">
      <div class="card col-7 lab-card">
        <h2>⏱️ 4-Beat Observer Loop — 𝓘 → 𝓛 → 𝓒 → 𝓢</h2>

        <div class="ring-timer" id="ring" aria-label="Observer ring timer">
          <svg viewBox="0 0 120 120" class="ring" aria-hidden="true">
            <defs>
              <linearGradient id="ringGrad" x1="0" x2="1">
                <stop offset="0" stop-color="#7af3ff"/><stop offset="1" stop-color="#f3c97a"/>
              </linearGradient>
            </defs>
            <circle cx="60" cy="60" r="54" class="ring-bg"/>
            <circle cx="60" cy="60" r="54" class="ring-fg" id="ringFg" pathLength="100"/>
            <text x="60" y="52" class="ring-phase" text-anchor="middle" id="ringPhase">Ready</text>
            <text x="60" y="72" class="ring-count" text-anchor="middle" id="ringCount">—</text>
          </svg>

          <div class="ring-controls">
            <label>Seconds/phase
              <input id="phaseSec" type="number" min="3" max="120" value="12" inputmode="numeric" aria-describedby="phaseHelp">
            </label>
            <label>Rounds
              <input id="rounds" type="number" min="1" max="20" value="3" inputmode="numeric">
            </label>
            <button id="startTimer" class="lab-btn" data-hotkey="S">Start</button>
            <button id="stopTimer"  class="lab-btn ghost">Stop</button>
          </div>

          <p id="phaseHelp" class="hint coach" data-coach="Breathe in on 𝓘, see on 𝓛, soften on 𝓒, whisper thanks on 𝓢.">
            Coach: breath cues map to operators.
          </p>
        </div>
      </div>

      <aside class="card col-5 lab-card">
        <h3>Daily Micro-Practices</h3>
        <ul class="list compact">
          <li><b>Commute:</b> choose 1 intention, speak it once, notice 3 things, return with gratitude.</li>
          <li><b>Conflict:</b> 10-second loop before replying; ask “what’s true, kind, necessary?”.</li>
          <li><b>Workout:</b> last set in 4 beats; log witness note.</li>
          <li><b>Prayer/Meditation:</b> 3 rounds; check Remnant tomorrow.</li>
        </ul>

        <div class="badges" aria-label="Streak badges">
          <span id="badge7" class="badge unlit" title="7-Day Seed">🌱 ×7</span>
          <span id="badge33" class="badge unlit" title="33-Day Orbit">🛰️ ×33</span>
          <span id="badge144" class="badge unlit" title="144 Closure">🜚 ×144</span>
        </div>
        <p class="meta">Badges light up as your ledger streak grows.</p>
      </aside>
    </article>
  </section>

  <!-- VOICE GATE TAB -->
  <section id="tab-voice" class="tab" role="tabpanel" aria-labelledby="voice">
    <article class="grid">
      <div class="card col-7 lab-card">
        <h2>🎙️ Voice Gate Lab <span class="meta">(Π<sub>ν</sub> helper)</span></h2>

        <div class="audio-pane" aria-label="Audio tools">
          <div class="audio-controls">
            <button id="micStart" class="lab-btn">Enable Mic</button>
            <button id="micStop"  class="lab-btn ghost">Stop</button>
            <span class="audio-hint" id="nearKey" role="status" aria-live="polite">—</span>
          </div>

          <canvas id="wave" width="800" height="140" aria-label="Waveform"></canvas>
          <canvas id="fft"  width="800" height="140" aria-label="Spectrum"></canvas>
        </div>

        <p class="hint coach" data-coach="Hum gently on one note. Peaks near 432/528/369 Hz will glow.">
          Coach: steady hum beats loud shouting.
        </p>
      </div>

      <aside class="card col-5 lab-card">
        <h3>Keys & Tips</h3>
        <ul class="list compact">
          <li><b>432 Hz</b> grounding • <b>528 Hz</b> repair • <b>369 Hz</b> lock-in/novelty.</li>
          <li>Mic gain low; room quiet. Analysis runs only on your device.</li>
          <li>Use the strongest line as your **carrier** in today’s intention.</li>
        </ul>
      </aside>
    </article>
  </section>

  <!-- PHRASE TUNER TAB -->
  <section id="tab-phrase" class="tab" role="tabpanel" aria-labelledby="phrase">
    <article class="grid">
      <div class="card col-7 lab-card">
        <h2>🔡 Phrase Tuner Pro <span class="meta">(Eq. 4 + Eq. 16)</span></h2>

        <textarea id="phraseIn" rows="3" placeholder="Type a sentence you plan to speak…"
                  aria-label="Phrase to tune"></textarea>

        <div class="chip-lane" id="chipLane" aria-label="Token weights (drag to emphasize)"></div>

        <div class="phrase-actions">
          <button id="btnTuned" class="lab-btn">Tune & Highlight</button>
          <button id="btnClearPhrase" class="lab-btn ghost">Clear</button>
          <output id="semScore" class="meta" aria-live="polite">Semantic weight: —</output>
        </div>

        <div class="phrase-out">
          <p><b>Negations:</b> <span id="negCount">0</span></p>
          <p><b>Suggestion:</b> <span id="phraseOut">—</span></p>
        </div>

        <p class="hint coach" data-coach="Drag chips to raise emphasis. Prefer verbs of clarity and nouns of truth.">
          Coach: weights simulate ∑ wₖ ∇<sub>sem</sub>(tokenₖ).
        </p>
      </div>

      <aside class="card col-5 lab-card">
        <h3>Micro-Templates</h3>
        <details><summary>Care & clarity</summary><p>I will speak simply and listen fully.</p></details>
        <details><summary>Leadership</summary><p>We deliver one useful thing today, together.</p></details>
        <details><summary>Healing</summary><p>May light reveal, and love restore.</p></details>
      </aside>
    </article>
  </section>

  <!-- COHERENCE DESK TAB -->
  <section id="tab-coherence" class="tab" role="tabpanel" aria-labelledby="coherence">
    <article class="grid">
      <div class="card col-7 lab-card">
        <h2>📈 Coherence Desk</h2>

        <div class="desk-grid">
          <div class="desk-card" aria-label="Ξ calculator">
            <label>⟨H·I⟩ (0–1)
              <input type="number" step="0.01" min="0" max="1" id="hDotI" value="0.62">
            </label>
            <label>Var[𝓜] (0–2)
              <input type="number" step="0.01" min="0" max="2" id="mVar" value="0.30">
            </label>
            <button id="btnXi" class="lab-btn">Compute Ξ</button>
            <output id="outXi" class="big" aria-live="polite">Ξ = —</output>
            <canvas id="xiSpark" width="320" height="60" aria-label="Ξ history"></canvas>
          </div>

          <div class="desk-card" aria-label="Memory half-life">
            <label>τ (days)
              <input type="number" id="tauDays" min="1" max="120" value="10">
            </label>
            <button id="btnHalfLife" class="lab-btn">Compute λ / t½</button>
            <output id="outHalfLife" class="big" aria-live="polite">λ = —, t½ = —</output>
            <p class="meta">Longer τ → slower decay → skills stick.</p>
          </div>
        </div>
      </div>

      <aside class="card col-5 lab-card">
        <h3>Stop Rule (Eq. 9)</h3>
        <p>If Truth/Distortion trend worsens, <b>abort</b> the operation. Ethics first.</p>
        <label class="coach-toggle small"><input id="autoLogXi" type="checkbox" checked> Auto-log Ξ to ledger</label>
      </aside>
    </article>
  </section>

  <!-- LEDGER TAB -->
  <section id="tab-ledger" class="tab" role="tabpanel" aria-labelledby="ledger">
    <article class="grid">
      <div class="card col-12 lab-card">
        <h2>📒 Witness Ledger <span class="meta">(private on this device)</span></h2>

        <div class="ledger-top" role="group" aria-label="New entry">
          <input id="entryIntention" placeholder="Intention (𝓘): one clean line…" aria-label="Intention">
          <input id="entryCarrier" placeholder="Carrier (432/528/369)" aria-label="Carrier frequency">
          <select id="entryQuality" aria-label="Ξ quality">
            <option value="">Ξ quality…</option><option>Low</option><option>Medium</option><option>High</option>
          </select>
          <input id="entryTags" placeholder="Tags (comma separated)" aria-label="Tags">
        </div>

        <textarea id="entryWitness" rows="2" placeholder="Witness notes (what changed, what lingered)…"
                  aria-label="Witness notes"></textarea>

        <div class="ledger-actions">
          <button id="btnAddEntry" class="lab-btn">Add</button>
          <span>🗓️ Streak: <b id="streakDays">0</b> days</span>
          <button id="btnExport" class="lab-btn">Export .json</button>
          <input type="file" id="fileImport" accept="application/json" hidden>
          <button id="btnImport" class="lab-btn ghost">Import .json</button>
          <input id="ledgerFilter" placeholder="Filter by tag or text…" aria-label="Filter entries">
        </div>

        <table id="ledgerTable" aria-label="Practice ledger">
          <thead>
            <tr><th>Date</th><th>Intention</th><th>Carrier</th><th>Ξ</th><th>Tags</th><th>Witness</th><th></th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </article>
  </section>

  <!-- Footer -->
  <footer class="footer" role="contentinfo">
    <div class="divider" aria-hidden="true"></div>
    <p>“Practice is the mathematics of compassion.”</p>
    <p>© <span id="yr">2025</span> Aaron Paul Laird — Scroll of Fire • BY-NC 4.0</p>
  </footer>

  <!-- Live region for toasts/status (filled by JS) -->
  <div id="lab-status" class="sr-only" role="status" aria-live="polite"></div>
</main>

<!-- Help modal template (JS can attach behavior) -->
<dialog id="lab-help" class="lab-card" aria-labelledby="help-title">
  <h3 id="help-title">Keyboard & Navigation</h3>
  <ul class="list">
    <li><kbd>1</kbd>–<kbd>5</kbd> switch tabs • <kbd>?</kbd> open/close help</li>
    <li><kbd>S</kbd> start/stop Observer ring timer</li>
    <li><kbd>/</kbd> focus ledger filter • <kbd>Esc</kbd> blur dialogs</li>
  </ul>
  <form method="dialog"><button class="lab-btn">Close</button></form>
</dialog>

<!-- Scripts -->
<script defer src="assets/js/teach.js?v=2025-10-18b"></script>
<script>
  // Small inline helpers safe to keep here
  document.addEventListener('DOMContentLoaded', () => {
    // Current year
    const yr = document.getElementById('yr'); if (yr) yr.textContent = new Date().getFullYear();

    // Optional keyboard help
    let helpOpen = false;
    const dlg = document.getElementById('lab-help');
    document.addEventListener('keydown', (e) => {
      if (e.key === '?') {
        e.preventDefault();
        if (dlg) { helpOpen ? dlg.close() : dlg.showModal(); helpOpen = !helpOpen; }
      }
    });

    // Ensure hash links activate the right tab visually
    if (location.hash) {
      const id = location.hash.slice(1);
      const target = document.getElementById(id);
      const btn = document.querySelector(`.pill[data-tab="${id.replace('tab-','')}"]`);
      if (target && btn) {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.pill').forEach(p => p.classList.remove('active'));
        target.classList.add('active'); btn.classList.add('active'); btn.setAttribute('aria-selected','true');
        target.scrollIntoView({behavior:'smooth', block:'start'});
      }
    }
  });
</script>
</body>
</html>
