/* ===== Scroll of Fire â€” Codex theme ===================================== */

:root{
  --bg:#0f1115;
  --panel:#14171d;
  --panel-2:#101319;
  --text:#e9edf3;
  --muted:#a7b1c2;
  --gold:#f3c97a;
  --gold-2:#caa962;
  --cyan:#9ae7ff;
  --accent:#8debd6;
  --shadow: 0 10px 30px rgba(0,0,0,.35);
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
html{ scroll-behavior:smooth; }
body{
  margin:0;
  background: radial-gradient(120% 100% at 50% 0%, #0c0e12, #0f1115 60%) no-repeat var(--bg);
  color:var(--text);
  font: 400 16px/1.65 "Inter", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  -webkit-font-smoothing:antialiased;
  text-rendering:optimizeLegibility;
}

.wrap{
  width:min(1120px, 100%);
  margin-inline:auto;
  padding: clamp(16px, 2vw, 24px);
}

/* Skip link */
.skip{
  position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden;
}
.skip:focus{ position:fixed; inset:auto auto auto 16px; width:auto; height:auto; padding:.5rem .75rem; background:#222a; color:#fff; z-index:1000; border-radius:.5rem }

/* Hero */
.hero{
  margin:0 0 clamp(16px, 3vw, 28px);
  border-radius: clamp(14px, 2vw, 22px);
  overflow:hidden;
  box-shadow: var(--shadow);
  background: linear-gradient(180deg, #0e1014, #0b0d10);
}
.hero img{
  width:100%;
  display:block;
  aspect-ratio: 16 / 9;
  object-fit: cover;            /* key mobile fix */
  object-position: center;
}

/* Headings */
.pagehead .title{
  margin: .5rem 0 0;
  font-family:"Crimson Pro", ui-serif, Georgia, serif;
  font-weight:800;
  font-size: clamp(28px, 3.8vw, 48px);
  line-height:1.1;
  letter-spacing:.2px;
  background: linear-gradient(90deg, var(--gold), var(--cyan));
  -webkit-background-clip: text;
  background-clip: text;
  color:transparent;
}
.subtitle{
  margin:.5rem 0 0;
  color:var(--muted);
  font-style:italic;
  font-size: clamp(14px, 2.4vw, 18px);
}

/* Divider + goldline */
.divider{
  height:1px; margin: clamp(16px, 4vw, 26px) 0;
  background: linear-gradient(90deg, transparent, #263044, transparent);
}
.goldline{
  height:1px; margin: clamp(18px, 5vw, 36px) 0;
  background: linear-gradient(90deg, transparent, rgba(243,201,122,.6), transparent);
  filter: drop-shadow(0 0 12px rgba(243,201,122,.25));
}

/* Grid */
.grid{
  display:grid;
  grid-template-columns: repeat(12, 1fr);
  gap: clamp(12px, 2vw, 20px);
}
.col-12{ grid-column: span 12; }
.col-8{ grid-column: span 8; }
.col-7{ grid-column: span 7; }
.col-6{ grid-column: span 6; }
.col-5{ grid-column: span 5; }
.col-4{ grid-column: span 4; }

@media (max-width: 980px){
  .col-8,.col-7,.col-6,.col-5,.col-4{ grid-column: span 12; }
}

/* Cards */
.card{
  background: linear-gradient(180deg, var(--panel), var(--panel-2));
  border: 1px solid rgba(255,255,255,.05);
  border-radius: clamp(14px, 1.8vw, 22px);
  padding: clamp(14px, 2.2vw, 22px);
  box-shadow: var(--shadow);
  transform: translateY(8px);
  opacity: 0;
  transition: transform .6s ease, opacity .6s ease, box-shadow .6s ease;
}
.card.visible{
  transform:none; opacity:1;
}
.card h2{
  font-family:"Crimson Pro", ui-serif, Georgia, serif;
  margin:.2rem 0 1rem;
  font-size: clamp(22px, 2.6vw, 28px);
  color: var(--gold);
}
.card h3{
  font-family:"Crimson Pro", ui-serif, Georgia, serif;
  margin:.4rem 0 .8rem;
  font-size: clamp(18px, 2.2vw, 22px);
  color: var(--gold-2);
}
.rule{
  height:1px; border:0; margin: 1rem 0;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,.08), transparent);
}

.list{
  margin: .25rem 0 0;
  padding-left: 1.2rem;
}
.list li{ margin:.25rem 0 .25rem; }

/* CTA */
.cta{
  display:inline-block;
  margin-top: .9rem;
  padding:.9rem 1.25rem;
  border-radius:14px;
  background: linear-gradient(180deg, #f5d489, #e5b95e);
  color:#1c1408;
  font-weight:800; text-decoration:none;
  box-shadow: 0 10px 28px rgba(243,201,122,.25), inset 0 1px 0 rgba(255,255,255,.3);
}
.cta:hover{ transform: translateY(-1px); box-shadow: 0 12px 32px rgba(243,201,122,.3), inset 0 1px 0 rgba(255,255,255,.35); }

/* Links */
a{ color:#9ad7ff; text-decoration: none; }
a:hover{ text-decoration: underline; }

/* Table styling */
table{ width:100%; border-collapse:collapse; font-size: .98rem; }
th, td{ padding:.6rem .5rem; border-bottom:1px solid rgba(255,255,255,.06); }
thead th{ color:var(--gold); font-weight:700; }

/* Footer */
.footer{ text-align:center; color:var(--muted); margin-top: 24px; }
.footer p{ margin:.4rem 0; }

/* ==== Equations ========================================================= */

/* Base */
.eq{
  --glow: 0 0 16px rgba(243,201,122,.12);
  position:relative;
  overflow-x:auto;
  -webkit-overflow-scrolling: touch;
  padding:12px 14px;
  border-radius:14px;
  background: #0f1218;
  border:1px solid #262b34;
  box-shadow: inset 0 0 18px rgba(255,200,107,.03);
  opacity:0;
  transform: translateY(8px) scale(.995);
  transition: opacity .6s ease, transform .6s ease, box-shadow .6s ease;
}

/* Subtle halo + vertical sweep */
.eq::before,
.eq::after{
  content:"";
  position:absolute; inset:0; border-radius:inherit; pointer-events:none;
}
.eq::before{
  background:
    radial-gradient(120% 80% at 10% 5%, rgba(243,201,122,.06), transparent 70%),
    radial-gradient(140% 90% at 100% 100%, rgba(122,243,255,.05), transparent 70%);
  opacity:0; transition: opacity .8s ease;
}
.eq::after{
  left:auto; right:10px; top:10px; bottom:10px; width:2px;
  background: linear-gradient(180deg, transparent, var(--gold), transparent);
  filter: blur(.4px);
  transform: translateX(12px);
  opacity:0;
}

.eq mjx-container{
  opacity:0;
  filter: drop-shadow(var(--glow));
  transition: opacity .5s ease .05s, filter .6s ease .05s;
}

/* Activated */
.eq.eq-on{
  opacity:1; transform:none;
  transition-delay: var(--eq-delay, 0s);
  box-shadow:
    inset 0 0 24px rgba(255,200,107,.05),
    0 0 0 0 rgba(243,201,122,0);
}
.eq.eq-on::before{ opacity:1; transition-delay: calc(var(--eq-delay,0s) + .05s); }
.eq.eq-on::after{
  opacity:.9;
  animation: eqSweep 1.2s ease-out forwards;
  animation-delay: calc(var(--eq-delay,0s) + .15s);
}
@keyframes eqSweep{
  0%   { transform: translateX(12px); opacity:0; }
  10%  { opacity:.9; }
  100% { transform: translateX(-6px); opacity:0; }
}
.eq.eq-on mjx-container{
  opacity:1;
  filter: drop-shadow(0 0 10px rgba(255,200,107,.10));
  transition-delay: calc(var(--eq-delay,0s) + .08s);
}

/* Safe scaling on mobile: keep big, but not break layout */
.eq mjx-container[display="true"]{
  max-width: 100%;
  overflow: visible;
}
.eq mjx-container svg{
  max-width: 100%;
  height: auto;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  .card, .eq{ opacity:1; transform:none }
  .eq::after{ display:none }
  .eq mjx-container{ opacity:1 }
}

/* Optional hover lift for cards */
.card:hover{ box-shadow: 0 12px 34px rgba(0,0,0,.45); }

/* Utility */
.meta{ color:var(--muted); font-size:.95rem; }
.sigil{ font-size:1.15rem; margin-right:.25rem; }
