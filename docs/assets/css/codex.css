/* ========== Scroll of Fire — Codex.css (2025-10-17) ========== */
/* Mobile-first, grid that truly collapses, equation polish, Meta-webview safe */

/* ---- Root / theme ---- */
:root{
  --bg:#0c0c0f;
  --panel:#121218;
  --panel-2:#101016;
  --text:#eae8e2;
  --muted:#b5b0a6;
  --gold:#f3c97a;
  --aqua:#8be9ff;
  --accent:#a7f3d0;
  --ring:rgba(243,201,122,.18);
  --shadow: 0 16px 40px rgba(0,0,0,.45);
  --radius:18px;
  --gap:18px;
}

/* ---- Reset-ish ---- */
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:radial-gradient(1200px 800px at 50% -20%, #14141c 0%, var(--bg) 60%) fixed var(--bg); color:var(--text)}
img{max-width:100%;height:auto;display:block}
a{color:var(--aqua);text-decoration:none}
a:hover{text-decoration:underline}
::selection{background:rgba(243,201,122,.18)}

/* ---- Typography ---- */
:root{
  --serif:'Crimson Pro', ui-serif, Georgia, 'Times New Roman', serif;
  --sans: 'Inter', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}
body{font-family:var(--sans); line-height:1.55; letter-spacing:.01em}

h1,h2,h3{font-family:var(--serif); line-height:1.15; margin:0 0 .6em}
h1{
  font-weight:800;
  font-size:clamp(1.9rem, 3.6vw + .6rem, 3.25rem);
  background:linear-gradient(180deg,#ffe9b6,#b3fff6 70%, #b3fff6);
  -webkit-background-clip:text; background-clip:text; color:transparent;
  text-shadow:0 2px 24px rgba(243,201,122,.08);
}
h2{font-weight:700; font-size:clamp(1.35rem,2.2vw + .4rem,2rem); color:var(--gold)}
h3{font-weight:700; font-size:clamp(1.05rem,1.4vw + .5rem,1.35rem); color:var(--gold)}
p{margin:.75em 0; font-size:clamp(.97rem, .3vw + .9rem, 1.05rem)}
.meta{color:var(--muted); font-size:.95em}
.tt{border-bottom:1px dotted rgba(255,255,255,.25); cursor:help}

/* ---- Wrapper / layout ---- */
.wrap{max-width:1120px; margin:0 auto; padding:18px 14px 64px}
.divider{height:1px; background:linear-gradient(90deg, transparent, rgba(243,201,122,.25), transparent); margin:22px 0}
.goldline{height:1px; background:linear-gradient(90deg, transparent, rgba(243,201,122,.2), transparent); margin:28px 0}

/* ---- Hero ---- */
.hero{
  position:relative; margin:8px 0 14px; border-radius:24px;
  background:radial-gradient(800px 400px at 50% -10%, rgba(243,201,122,.12), transparent 60%);
  box-shadow: var(--shadow);
  overflow:hidden;
  aspect-ratio:16/9;
}
.hero img{width:100%; height:100%; object-fit:cover}
.sigil-line{
  position:absolute; inset:auto 0 0 0; height:72px;
  background:radial-gradient(60% 20px at 50% 0, rgba(243,201,122,.22), transparent 70%);
  pointer-events:none
}

/* ---- Grid ---- */
.grid{
  display:grid; grid-template-columns:1fr; gap:var(--gap);
}
.card{
  background:linear-gradient(180deg,var(--panel),var(--panel-2));
  border:1px solid rgba(255,255,255,.06);
  border-radius:var(--radius);
  padding:18px;
  box-shadow:0 6px 18px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.02);
  transform:translateZ(0);
}
.card:hover{box-shadow:0 12px 34px rgba(0,0,0,.42), inset 0 1px 0 rgba(255,255,255,.03)}
.card.visible{animation:raise .5s ease both}
@keyframes raise{from{opacity:.0; transform:translateY(8px)} to{opacity:1; transform:none}}

.list{list-style: none; padding-left:0; margin:0}
.list li{margin:.55em 0; padding-left:1.15em; position:relative}
.list li::before{content:"•"; position:absolute; left:0; color:var(--gold)}
.list a{word-break:break-word; overflow-wrap:anywhere}

/* ---- Columns (become real columns at >=960px) ---- */
@media (min-width:960px){
  .grid{grid-template-columns: repeat(12, 1fr)}
  .col-12{grid-column: span 12}
  .col-8{grid-column: span 8}
  .col-7{grid-column: span 7}
  .col-6{grid-column: span 6}
  .col-5{grid-column: span 5}
  .col-4{grid-column: span 4}
}

/* On small screens force single column spans so nothing pinches */
@media (max-width:959.98px){
  [class*="col-"]{grid-column:1 / -1}
}

/* ---- CTA ---- */
.cta{
  display:inline-block; margin-top:10px; padding:10px 14px; border-radius:14px;
  background:linear-gradient(180deg, rgba(243,201,122,.14), rgba(243,201,122,.08));
  border:1px solid rgba(243,201,122,.28);
  color:#111; font-weight:700;
  background-color:var(--gold); text-decoration:none;
  box-shadow:0 10px 26px rgba(243,201,122,.25);
}
.cta:hover{filter:brightness(1.03)}

/* ---- Table (constants) ---- */
table{width:100%; border-collapse:separate; border-spacing:0 8px; font-size:.98rem}
thead th{color:var(--muted); font-weight:600; text-align:left; padding:6px 10px}
tbody td{
  background:#0f0f14; border:1px solid rgba(255,255,255,.06);
  padding:10px 12px; border-radius:12px
}

/* ---- Equations ---- */
/* Base (mobile-first): tighter padding + safe shadows */
.eq{
  position:relative; overflow-x:auto;
  padding:10px 44px 12px 12px;
  border-radius:14px;
  background:#111115;
  border:1px solid #26262c;
  box-shadow: inset 0 0 20px rgba(255,200,107,.03);
  opacity:0; transform: translateY(8px) scale(.995);
  transition: opacity .6s ease, transform .6s ease, box-shadow .6s ease;
}

/* Halo + sweep */
.eq::before,.eq::after{content:""; position:absolute; pointer-events:none; border-radius:inherit; inset:0}
.eq::before{
  background:
   radial-gradient(120% 80% at 10% 5%, rgba(243,201,122,.07), transparent 70%),
   radial-gradient(140% 90% at 100% 100%, rgba(122,243,255,.05), transparent 70%);
  opacity:0; transition:opacity .8s ease;
}
.eq::after{
  left:auto; right:10px; top:10px; bottom:10px; width:2px;
  background: linear-gradient(180deg, transparent, var(--gold), transparent);
  filter: blur(.4px);
  transform: translateX(12px);
  opacity:0;
}

/* MathJax container */
.eq mjx-container{
  opacity:0;
  filter: drop-shadow(0 0 8px rgba(255,200,107,.06));
  transition: opacity .5s ease .05s, filter .6s ease .05s;
  /* keep equations readable on phones */
  font-size: clamp(1.02rem, 1.2vw + .9rem, 1.25rem);
}
.eq mjx-container[display="true"]{ /* multi-line block eqs */
  margin: 10px 0;
}

/* Activated */
.eq.eq-on{
  opacity:1; transform:none;
  transition-delay: var(--eq-delay, 0s);
  box-shadow: inset 0 0 24px rgba(255,200,107,.05);
}
.eq.eq-on::before{opacity:1; transition-delay: calc(var(--eq-delay,0s) + .05s)}
.eq.eq-on::after{
  opacity:.9; animation: eqSweep 1.2s ease-out forwards;
  animation-delay: calc(var(--eq-delay,0s) + .15s);
}
@keyframes eqSweep{
  0%{ transform:translateX(12px); opacity:0 }
  10%{ opacity:.9 }
  100%{ transform:translateX(-6px); opacity:0 }
}
.eq.eq-on mjx-container{
  opacity:1;
  filter: drop-shadow(0 0 10px rgba(255,200,107,.10));
  transition-delay: calc(var(--eq-delay,0s) + .08s);
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  .eq{ opacity:1; transform:none }
  .eq::after{ display:none }
  .eq mjx-container{ opacity:1 }
}

/* Equation card spacing */
.card .eq{margin-top:.65rem}

/* ---- Footer ---- */
.footer{padding:26px 0 0; color:var(--muted); text-align:center}
.footer .divider{margin:10px 0 16px}

/* ---- Quick fixes for tiny phones ---- */
@media (max-width:380px){
  .wrap{padding:14px 10px 56px}
  .hero{border-radius:18px}
  .card{padding:16px; border-radius:16px}
  .cta{width:100%; text-align:center}
}
