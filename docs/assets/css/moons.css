@layer components {
  /* Ring badge */
  .ringcard{ display:grid; gap:10px }
  .moon-badge{ display:flex; align-items:center; gap:10px; flex-wrap:wrap }
  .ring{ width:clamp(90px,26vw,120px); height:auto; display:grid; place-items:center; position:relative }
  .ring .ring-bg{ fill:none; stroke:#142233; stroke-width:10 }
  .ring .ring-fg{ fill:none; stroke-linecap:round; stroke:url(#rg, var(--accent)); stroke-width:12;
    filter: drop-shadow(0 0 8px color-mix(in oklch, var(--accent) 55%, transparent)); }
  .ring .label{ position:absolute; inset:0; display:grid; place-items:center; font-weight:800 }
  .ring .label .big{ font-size:clamp(1.1rem,6vw,1.6rem) }
  .ring .label .small{ font-size:.85rem; opacity:.75 }

  .weeklabel{ color:var(--muted) }
  .week{ display:grid; grid-template-columns:repeat(28,1fr); gap:.35rem; max-width:100% }
  .week .dot{ width:.55rem; height:.55rem; border-radius:50%; background:#1b2231 }
  .week .dot.on{ background: color-mix(in oklab, var(--accent) 65%, #1b2231) }

  /* Calendars */
  .calendar,.gregorian{ --cell: clamp(38px, 9.5vw, 48px); display:grid; gap:8px }
  .calendar .head,.gregorian .head,
  .calendar .row,.gregorian .row{
    display:grid; grid-template-columns:repeat(7,1fr); gap:6px
  }
  .dow{ color:var(--muted); font-weight:600; text-align:center; font-size:.85rem }
  .daycell{
    min-height:var(--cell); background:var(--bg-elev); border:1px solid var(--line);
    border-radius:10px; display:flex; align-items:flex-start; justify-content:flex-start;
    padding:.45rem .5rem; position:relative;
  }
  .daycell .n{ font:600 .95rem/1 Inter,system-ui; opacity:.92 }
  .daycell .evt{ position:absolute; right:.45rem; bottom:.35rem; width:6px; height:6px; border-radius:999px; background:transparent }
  .daycell.is-dim{ opacity:.35 }
  .daycell.is-today{ outline:2px solid var(--accent); outline-offset:1px }
  .daycell.is-doot{ border-color: color-mix(in oklab, var(--gold) 60%, var(--line)) }
  .daycell.is-doot .evt{ background: var(--gold) }
  .daycell.is-leap{ border-color: color-mix(in oklab, var(--accent-2) 60%, var(--line)) }
  .daycell.is-leap .evt{ background: var(--accent-2) }

  /* Legends, chips */
  #calLegend .k-dot{ display:inline-block; width:.7em; height:.7em; border-radius:50%; vertical-align:middle; margin-right:.35rem }
  #calLegend .k-evt1{ background: var(--accent) }
  #calLegend .k-evt2{ background: var(--accent-2) }
  #calLegend .k-doot{ background: var(--gold) }
  #calLegend .k-leap{ background: var(--accent-2) }
  #calLegend .k-today{ background: color-mix(in oklab, var(--accent) 60%, var(--ink)) }

  /* Scrollers for wide tables on phones */
  .scroller{ overflow:auto; -webkit-overflow-scrolling:touch }
}
