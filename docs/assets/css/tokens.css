/* ============================================================
   Scroll of Fire — TOKENS LAYER (v4.2)
   Wizard of YHWH · Remnant Astronomy Palette
   Purpose: design tokens, base typography, element defaults.
   This file should load FIRST in your CSS stack.
   ============================================================ */

@layer tokens {
  :root {
    /* -------------------- Core System -------------------- */
    color-scheme: dark light;

    /* Dark base (“Temple of Light”) */
    --bg:            #05070d;
    --surface:       #0e131a;
    --surface-2:     #151c25;
    --fg:            #eef2fb;
    --muted:         #9da8c4;
    --line:          #2a3242;
    --shadow:        rgba(0,0,0,.6);

    /* Accents — phase-tinted in JS when needed */
    --accent:        #7af3ff;   /* moon-blue */
    --accent-2:      #f3c97a;   /* solar-gold */
    --accent-soft:   #7aa8ff;
    --accent-fire:   #ff6b3d;
    --accent-earth:  #b3ff85;
    --accent-air:    #a7f6ff;
    --accent-water:  #7aaaff;

    /* Elemental glows */
    --fire-glow:   0 0 12px rgba(255,107,61,.55);
    --air-glow:    0 0 12px rgba(167,246,255,.45);
    --water-glow:  0 0 12px rgba(122,170,255,.45);
    --earth-glow:  0 0 12px rgba(179,255,133,.45);
    --gold-glow:   0 0 14px rgba(243,201,122,.55);

    /* Typography */
    --font-sans: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
    --font-serif:"Crimson Pro", ui-serif, Georgia, serif;
    --size-xs:   0.75rem;
    --size-sm:   0.875rem;
    --size-base: 1rem;
    --size-lg:   1.25rem;
    --size-xl:   1.75rem;
    --size-xxl:  2.25rem;

    /* Radii / Depth */
    --r-sm: 6px;
    --r-md: 12px;
    --r-lg: 20px;

    /* Motion & easing */
    --t-fast: 150ms;
    --t-med:  350ms;
    --t-slow: 750ms;
    --ease: cubic-bezier(.25,.8,.25,1);

    /* Elevation (shadow + border hybrid) */
    --elev-1: 0 0 0 1px var(--line), 0 8px 14px -6px rgba(0,0,0,.5);
    --elev-2: 0 0 0 1px var(--line), 0 14px 28px -10px rgba(0,0,0,.6);
    --elev-3: inset 0 0 0 1px var(--line), 0 0 16px rgba(122,243,255,.15);

    /* Scrollbar (modern browsers) */
    scrollbar-color: var(--accent) var(--surface);
    scrollbar-width: thin;

    /* Focus ring */
    --focus-ring: 0 0 0 2px color-mix(in oklab, var(--accent) 70%, #ffffff 0%);
  }

  /* -------------------- Dark / Light Schemes -------------------- */
  @media (prefers-color-scheme: dark) {
    :root {
      --bg: #05070d;
      --surface: #0e131a;
      --surface-2: #151c25;
      --fg: #edf2fb;
      --muted: #a7b1ca;
      --line: #2a3242;
    }
  }

  @media (prefers-color-scheme: light) {
    :root {
      --bg: #f7fbff;
      --surface: #ffffff;
      --surface-2: #f0f3f8;
      --fg: #0b0b0f;
      --muted: #4a4a55;
      --line: #ccd3e0;

      /* tone down glows a touch in light */
      --gold-glow: 0 0 8px rgba(243,201,122,.35);
    }
  }

  /* -------------------- Thematic Carriers -------------------- */
  .carrier-432 { --accent: #7af3ff; --accent-2: #f3c97a; }
  .carrier-528 { --accent: #85ff7a; --accent-2: #7af3ff; }
  .carrier-369 { --accent: #f3c97a; --accent-2: #ff7ad5; }
  .carrier-144 { --accent: #a7f6ff; --accent-2: #7aa8ff; }
  .carrier-963 { --accent: #f3aaff; --accent-2: #7af3ff; }

  /* -------------------- Global Text & Base -------------------- */
  html, body {
    font-family: var(--font-sans);
    font-size: var(--size-base);
    color: var(--fg);
    background: var(--bg);
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    scroll-behavior: smooth;
  }

  h1,h2,h3,h4 {
    font-family: var(--font-serif);
    font-weight: 700;
    color: var(--accent-2);
    letter-spacing: 0.02em;
    text-shadow: var(--gold-glow);
    margin: 0 0 .4em;
  }

  p { margin: 0 0 1em; }
  small { font-size: var(--size-sm); color: var(--muted); }

  a {
    color: var(--accent);
    text-decoration: none;
    transition: color var(--t-fast) var(--ease), outline-color var(--t-fast) var(--ease);
    outline: none;
  }
  a:hover { color: var(--accent-2); }
  a:focus-visible { box-shadow: var(--focus-ring); border-radius: 6px; }

  /* -------------------- Containers -------------------- */
  .card {
    background: var(--surface);
    border: 1px solid var(--line);
    border-radius: var(--r-md);
    padding: 1.2rem 1.4rem;
    box-shadow: var(--elev-1);
    transition: transform var(--t-med) var(--ease), box-shadow var(--t-med) var(--ease);
  }
  .card:hover { transform: translateY(-2px); box-shadow: var(--elev-2); }

  .shine {
    background:
      linear-gradient(135deg, var(--surface) 60%, rgba(255,255,255,.03)),
      radial-gradient(circle at 25% 15%, color-mix(in oklab, var(--accent) 18%, transparent), transparent 60%);
    background-blend-mode: overlay;
  }

  /* -------------------- Interactive Elements -------------------- */
  .lab-btn {
    background: var(--accent);
    color: #000;
    border: none;
    border-radius: var(--r-sm);
    font-weight: 600;
    padding: .45rem .9rem;
    cursor: pointer;
    transition: transform var(--t-fast) var(--ease), background var(--t-fast) var(--ease), box-shadow var(--t-fast) var(--ease);
  }
  .lab-btn:hover { background: var(--accent-2); box-shadow: var(--gold-glow); }
  .lab-btn:active { transform: translateY(1px) scale(.99); }
  .lab-btn:focus-visible { outline: none; box-shadow: var(--focus-ring); }

  .lab-input {
    background: var(--surface-2);
    border: 1px solid var(--line);
    border-radius: var(--r-sm);
    color: var(--fg);
    padding: .35rem .6rem;
  }

  .pill, .tag {
    background: var(--surface-2);
    color: var(--muted);
    border: 1px solid var(--line);
    border-radius: 999px;
    padding: .2rem .6rem;
    margin-right: .3rem;
    font-size: var(--size-sm);
    display: inline-flex; align-items: center; gap: .4ch;
  }

  /* -------------------- Elemental Accents -------------------- */
  .el-fire   { filter: drop-shadow(var(--fire-glow)); }
  .el-air    { filter: drop-shadow(var(--air-glow)); }
  .el-water  { filter: drop-shadow(var(--water-glow)); }
  .el-earth  { filter: drop-shadow(var(--earth-glow)); }

  /* -------------------- Lines & Rulers -------------------- */
  .goldline {
    height: 2px;
    background: linear-gradient(90deg,var(--accent-2),transparent);
    border-radius: var(--r-sm);
  }

  /* -------------------- Micro-utilities -------------------- */
  .mono   { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Roboto Mono", monospace; }
  .meta   { color: var(--muted); font-size: var(--size-sm); }
  .hint   { font-size: var(--size-sm); opacity: .75; }
  .kbd    { background: var(--surface-2); border: 1px solid var(--line); border-radius: var(--r-sm); padding: 0 .35em; font-weight: 700; }

  .sr-only {
    position:absolute !important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden;
    clip: rect(0 0 0 0); white-space:nowrap; border:0;
  }

  /* Width guards for edge devices */
  .wrap { max-width: 1200px; margin-inline: auto; padding-inline: clamp(12px, 3vw, 20px); }

  /* -------------------- Scrollbars (WebKit) -------------------- */
  ::-webkit-scrollbar { width: 10px; height: 10px; }
  ::-webkit-scrollbar-thumb {
    background-color: var(--accent);
    border-radius: 10px;
    border: 2px solid var(--surface);
  }
  ::-webkit-scrollbar-thumb:hover { background: var(--accent-2); }
  ::-webkit-scrollbar-track { background: var(--surface-2); }

  /* -------------------- Motion / Data / Contrast -------------------- */
  @media (prefers-reduced-motion: reduce) {
    * { animation-duration: 1ms !important; animation-iteration-count: 1 !important; transition-duration: 1ms !important; scroll-behavior: auto !important; }
  }

  @media (prefers-contrast: more) {
    :root {
      --line: color-mix(in oklab, var(--line) 70%, #ffffff 30%);
      --focus-ring: 0 0 0 3px color-mix(in oklab, var(--accent) 85%, #ffffff 0%);
    }
    .card { box-shadow: 0 0 0 2px var(--line); }
    a:hover { text-decoration: underline; }
  }

  @media (prefers-reduced-data: reduce) {
    .shine { background: var(--surface); }
    .lab-btn { box-shadow: none; }
  }

  /* -------------------- Print hygiene -------------------- */
  @media print {
    :root { color-scheme: light; }
    html, body { background: #fff !important; color: #000 !important; }
    .card, .shine { box-shadow: none !important; border-color: #ddd !important; background: #fff !important; }
    a, a:visited { color: #000 !important; text-decoration: underline; }
  }
}
/* ============================ End tokens.css ============================ */
