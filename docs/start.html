<!doctype html>
<html lang="en" dir="ltr">
<head>
  <!-- Resolve all relative URLs from the project root on GitHub Pages -->
  <base href="https://ssnfts24.github.io/scroll-of-fire/">
  <script>
    // In GitHub repo preview (github.com), remove <base> so relative paths still work.
    if (location.hostname === "github.com") {
      const b = document.querySelector("base"); if (b) b.remove();
    }
  </script>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Quickstart â€” Scroll of Fire</title>

  <link rel="canonical" href="https://ssnfts24.github.io/scroll-of-fire/start.html"/>
  <meta name="description" content="Quickstart: a 60-second run to use the Codex. Pick a voice carrier, speak one clear line, measure coherence, and log your witness.">
  <meta name="color-scheme" content="dark">
  <meta name="theme-color" content="#0b0b0f">

  <meta property="og:site_name" content="Scroll of Fire">
  <meta property="og:title" content="Quickstart â€” Scroll of Fire">
  <meta property="og:description" content="Pick a carrier, speak one line, measure coherence, and log it in under a minute.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://ssnfts24.github.io/scroll-of-fire/start.html">
  <meta property="og:image" content="assets/file_0000000052e861f98b087ad0b80cbefc%20(1).png">

  <!-- CSS -->
  <link rel="preload" as="style" href="assets/css/codex.css?v=qs2">
  <link rel="stylesheet" href="assets/css/codex.css?v=qs2">

  <!-- Preload banner (correct path from site root) -->
  <link rel="preload" as="image"
        href="assets/file_0000000052e861f98b087ad0b80cbefc%20(1).png"
        imagesizes="100vw" fetchpriority="high">

  <style>
    :root{ --maxw:980px }
    .wrap{max-width:var(--maxw)}
    .hero{border-radius:16px;margin:8px 0 14px;overflow:hidden}
    .pill{display:inline-block;padding:.45rem .7rem;border:1px solid var(--line);border-radius:999px}
    .controls{display:flex;flex-wrap:wrap;gap:10px}
    .controls .pill[aria-pressed="true"]{box-shadow:0 0 0 1px rgba(122,243,255,.35), 0 8px 18px rgba(0,0,0,.35)}
    .grid2{display:grid;grid-template-columns:1.2fr .8fr;gap:14px}
    @media(max-width:900px){.grid2{grid-template-columns:1fr}}
    .meter{width:100%}
    .muted{color:var(--muted)}
    .inline-btn{border:1px solid var(--line);padding:.5rem .7rem;border-radius:10px;background:transparent;color:inherit}
    .inline-btn:hover{border-color:#3a3a44}
    .log-item{border-top:1px solid var(--line);padding:10px 0}
    .small{font-size:.95em}
  </style>
</head>
<body>
<main class="wrap">

  <!-- Banner (use assets/, add raw fallback) -->
  <figure class="hero hero--contain" aria-label="Scroll of Fire banner">
    <img
      src="assets/file_0000000052e861f98b087ad0b80cbefc%20(1).png"
      data-src-raw="https://raw.githubusercontent.com/ssnfts24/scroll-of-fire/main/docs/assets/file_0000000052e861f98b087ad0b80cbefc%20(1).png"
      onerror="if(this.dataset.srcRaw&&!this._tried){this._tried=1;this.src=this.dataset.srcRaw;}"
      alt="Scroll of Fire â€” gilded sigil banner"
      width="1600" height="900" loading="eager" decoding="async" fetchpriority="high">
    <noscript><img src="assets/file_0000000052e861f98b087ad0b80cbefc%20(1).png" alt=""></noscript>
  </figure>

  <!-- Nav -->
  <nav class="tabs" aria-label="Primary navigation">
    <a class="tab" href="index.html">âŒ‚ Home</a>
    <a class="tab" href="theory.html">ðŸ“˜ Theory</a>
    <a class="tab" href="teach.html">ðŸŽ“ Teach</a>
    <a class="tab tab--primary" aria-current="page" href="start.html">âš¡ Quickstart</a>
    <a class="tab" href="ledger.html">ðŸ§¾ Ledger</a>
  </nav>

  <h1 class="title">âš¡ 60-Second Quickstart</h1>
  <p class="subtitle">Pick a carrier â†’ speak one clear line â†’ measure coherence â†’ save the witness.</p>

  <!-- Content (unchanged) -->
  <section class="grid2" aria-label="Quickstart flow">
    <!-- ... your existing Quickstart content exactly as-is ... -->
  </section>

  <footer class="footer">
    <div class="divider" aria-hidden="true"></div>
    <p class="small muted">Use headphones if possible. Stop if you feel off-balance â€” ethics first.</p>
    <p>Â© <span id="yr">2025</span> Aaron Paul Laird â€” Scroll of Fire</p>
  </footer>
</main>

<script>
(function(){
  const $ = s => document.querySelector(s);
  const $$ = s => Array.from(document.querySelectorAll(s));
  const yr = $('#yr'); if (yr) yr.textContent = new Date().getFullYear();

  // Carrier toggle
  let carrier = "none";
  $$('.pill[data-carrier]').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      $$('.pill[data-carrier]').forEach(b=>b.setAttribute('aria-pressed','false'));
      btn.setAttribute('aria-pressed','true');
      carrier = btn.dataset.carrier;
    });
  });

  // Timer
  let tId=0, tLeft=60;
  const timer = $('#timer'), start = $('#startRun'), stop = $('#stopRun');
  function tick(){ timer.textContent = `${tLeft}s`; if (tLeft<=0){ stopRun(); return; } tLeft--; tId = setTimeout(tick, 1000); }
  function startRun(){ if (tId) return; tLeft = 60; timer.textContent = "60s"; start.disabled = true; stop.disabled = false; tId = setTimeout(tick, 1000); }
  function stopRun(){ clearTimeout(tId); tId = 0; start.disabled = false; stop.disabled = true; timer.textContent = "Stopped"; }
  if (start && stop){ start.addEventListener('click', startRun); stop.addEventListener('click', stopRun); }

  // Storage
  const KEY = 'sof_ledger_entries_v1';
  const read = () => { try{ return JSON.parse(localStorage.getItem(KEY)||'[]'); }catch{ return []; } };
  const write = (arr) => localStorage.setItem(KEY, JSON.stringify(arr));

  // Save
  const saveBtn = $('#saveEntry');
  if (saveBtn) saveBtn.addEventListener('click', ()=>{
    const phrase = ($('#phrase')?.value||'').trim();
    const coherence = Number($('#coh')?.value||0);
    const when = new Date().toISOString();
    if (!phrase){ alert('Add a clear line first.'); return; }
    const entry = { when, carrier, phrase, coherence };
    const all = read(); all.unshift(entry); write(all);
    renderRecent(all);
    alert('Saved to Ledger (browser-local).');
  });

  // Export
  const exportBtn = $('#exportEntries');
  if (exportBtn) exportBtn.addEventListener('click', ()=>{
    const data = read();
    const blob = new Blob([JSON.stringify(data,null,2)], {type:'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href = url; a.download = 'scroll-of-fire-ledger.json';
    document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
  });

  // Recent list
  function renderRecent(all = read()){
    const box = $('#recent');
    if (!box) return;
    if (!all.length){ box.textContent = 'No entries yet.'; return; }
    box.innerHTML = all.slice(0,5).map(e=>`
      <div class="log-item">
        <div><strong>${e.phrase.replace(/</g,'&lt;')}</strong></div>
        <div class="small muted">${new Date(e.when).toLocaleString()} Â· carrier: ${e.carrier} Â· Îž: ${e.coherence}</div>
      </div>`).join('');
  }
  renderRecent();
})();
</script>
</body>
</html>
