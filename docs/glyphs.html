<!doctype html>
<html lang="en" dir="ltr">
<head>
  <base href="https://ssnfts24.github.io/scroll-of-fire/">
  <meta charset="utf-8" />
  <title>Voice-Glyph Synth ‚Äî Scroll of Fire</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0b0b0f"><meta name="color-scheme" content="dark">
  <meta name="description" content="Project a tuned phrase (Eq.16) into a polar lattice (Eq.11) to mint a simple glyph. Save PNG and attach to ledger notes.">
  <link rel="canonical" href="https://ssnfts24.github.io/scroll-of-fire/glyphs.html" />
  <link rel="preload" as="style" href="assets/css/codex.css?v=2025-10-19">
  <link rel="stylesheet" href="assets/css/codex.css?v=2025-10-19" media="print" onload="this.media='all'"><noscript><link rel="stylesheet" href="assets/css/codex.css?v=2025-10-19"></noscript>
  <style>.wrap{max-width:980px;margin:0 auto;padding:20px 16px 80px}.title{font-family:"Crimson Pro",serif;font-weight:800;text-align:center;font-size:clamp(28px,3.6vw,44px);margin:8px 0 4px;background:linear-gradient(180deg,#fff,#cfefff 60%,#a7f6ff);-webkit-background-clip:text;background-clip:text;color:transparent}canvas{width:100%;max-width:560px;height:auto;border:1px solid #2a2a33;border-radius:12px;background:#0f0f14;display:block;margin:8px auto}</style>
</head>
<body>
<main class="wrap">
  <header class="page-head fancy-head">
    <h1 class="title">üî∑ Voice-Glyph Synth</h1>
    <p class="subtitle">Eq.16 ‚Üí Eq.11: token weights ‚Üí polar projection ‚Üí glyph. Save and attach to your ledger.</p>
    <nav class="crumbs" style="display:flex;gap:8px;justify-content:center">
      <a class="cta" href="index.html">‚Üê Codex</a><a class="cta" href="teach.html">Teaching Lab</a>
    </nav>
  </header>

  <section class="card">
    <h2>Phrase</h2>
    <textarea id="phrase" rows="3" placeholder="Type your tuned phrase‚Ä¶"></textarea>
    <div class="lab-row">
      <button id="render" class="lab-btn">Render Glyph</button>
      <button id="save" class="lab-btn ghost" disabled>Save .png</button>
    </div>
    <p class="meta">Weights are inferred by simple heuristics (verbs, nouns ‚Üë; filler ‚Üì). For precision, tune in Phrase Tuner first.</p>
  </section>

  <section class="card">
    <h2>Glyph</h2>
    <canvas id="cv" width="800" height="800" aria-label="Voice glyph"></canvas>
    <div class="eq"><div class="eq-scroll">
      $$ \Pi_{\nu}:\ \mathcal{R}\to\mathbb{C},\quad \Pi_{\nu}(\mathcal{R})=\int \mathcal{R}(x) e^{-i2\pi\nu x}\,dx \tag{Eq.11} $$
      $$ \nabla_{\text{sem}}\mathrm{Phrase} = \sum w_k \nabla_{\text{sem}}\mathrm{Token}_k \tag{Eq.16} $$
    </div></div>
  </section>

  <footer class="footer">
    <div class="divider" aria-hidden="true"></div>
    <p>¬© <span id="yr">2025</span> Aaron Paul Laird ‚Äî Scroll of Fire ‚Ä¢ BY-NC 4.0</p>
  </footer>
</main>

<script>
(function(){
  const y=document.getElementById('yr'); if(y) y.textContent=String(new Date().getFullYear());
  function rank(token){
    const t=token.toLowerCase();
    if(/(not|never|no|can't|won't|don't)/.test(t)) return 0.1;
    if(/(choose|deliver|build|learn|restore|reveal|listen|act|serve)/.test(t)) return 1.0;
    if(/(love|truth|light|care|power|calm|timing|thanks)/.test(t)) return 0.85;
    if(/(and|the|a|to|of|for|with|that|this)/.test(t)) return 0.2;
    return 0.6;
  }
  function weights(text){
    let toks=text.trim().split(/\s+/).filter(Boolean).slice(0,24);
    if(!toks.length) toks=["empty"];
    let raw=toks.map(rank);
    const s=raw.reduce((a,b)=>a+b,0)||1;
    return toks.map((t,i)=>({t, w:raw[i]/s}));
  }
  function drawGlyph(list){
    const c=document.getElementById('cv'), ctx=c.getContext('2d');
    ctx.clearRect(0,0,c.width,c.height);
    const W=c.width, H=c.height, cx=W/2, cy=H/2, R=Math.min(cx,cy)*0.85;
    // background grid
    ctx.strokeStyle="rgba(122,243,255,.12)"; ctx.lineWidth=1;
    for(let i=0;i<12;i++){ let a=(i/12)*Math.PI*2; ctx.beginPath(); ctx.moveTo(cx,cy); ctx.lineTo(cx+R*Math.cos(a), cy+R*Math.sin(a)); ctx.stroke(); }
    ctx.beginPath(); ctx.arc(cx,cy,R,0,Math.PI*2); ctx.stroke();

    // polygon from token weights mapped around circle
    ctx.beginPath();
    let ang=0, step=(Math.PI*2)/list.length;
    list.forEach((o,idx)=>{
      const r = 0.35*R + o.w*R*0.55; // base + weight
      const x = cx + r*Math.cos(ang);
      const y = cy + r*Math.sin(ang);
      idx?ctx.lineTo(x,y):ctx.moveTo(x,y);
      ang += step;
    });
    ctx.closePath();
    ctx.strokeStyle="rgba(243,201,122,.9)"; ctx.lineWidth=2; ctx.stroke();
    ctx.fillStyle="rgba(243,201,122,.12)"; ctx.fill();

    // center seal
    ctx.beginPath(); ctx.arc(cx,cy,6,0,Math.PI*2); ctx.fillStyle="rgba(122,243,255,.8)"; ctx.fill();
  }

  const render=document.getElementById('render'), save=document.getElementById('save');
  render.addEventListener('click', ()=>{
    const list=weights(document.getElementById('phrase').value);
    drawGlyph(list); save.disabled=false;
  });
  save.addEventListener('click', ()=>{
    const url=document.getElementById('cv').toDataURL("image/png");
    const a=document.createElement('a'); a.href=url; a.download="voice-glyph.png"; a.click();
  });
})();
</script>
</body></html>
